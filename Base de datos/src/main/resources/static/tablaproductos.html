<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Electronicos LittleBlackBerry - Productos</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <style>
    /* Estilos... */
  </style>
</head>
<body>

<main>
  <h2>Productos Almacenados</h2>
  <table id="product-table">
    <thead>
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Descripción</th>
      <th>Precio</th>
      <th>Acciones</th>
    </tr>
    </thead>
    <tbody id="product-list">
    <!-- Las filas de productos se añadirán aquí -->
    </tbody>
  </table>
</main>

<script>
  function editProduct(productId) {
    let product = JSON.parse(localStorage.getItem(productId));
    $("#edit-product-name").val(product.name);
    $("#edit-product-desc").val(product.description);
    $("#edit-product-price").val(product.price);
    $("#edit-product-id").val(productId);
    $("#edit-product-modal").show();
  }

  function deleteProduct(productId) {
    if (confirm("¿Estás seguro de que quieres eliminar este producto?")) {
      localStorage.removeItem(productId);
      $("#product-row-" + productId).remove();
    }
  }

  function updateProduct() {
    let productId = $("#edit-product-id").val();
    let newName = $("#edit-product-name").val();
    let newDesc = $("#edit-product-desc").val();
    let newPrice = $("#edit-product-price").val();

    let updatedProduct = {
      id: productId,
      name: newName,
      description: newDesc,
      price: newPrice
    };

    localStorage.setItem(productId, JSON.stringify(updatedProduct));

    // Actualizar la fila de la tabla con los nuevos datos
    let productRow = $("#product-row-" + productId);
    productRow.find(".product-name").text(newName);
    productRow.find(".product-desc").text(newDesc);
    productRow.find(".product-price").text("$" + newPrice);

    $("#edit-product-modal").hide();
  }
</script>

<!-- Modal de Edición de Producto -->
<div id="edit-product-modal" style="display:none;">
  <h2>Editar Producto</h2>
  <input type="hidden" id="edit-product-id">
  <input placeholder="Nombre del Producto" id="edit-product-name">
  <input placeholder="Descripcion" id="edit-product-desc">
  <input placeholder="Precio" id="edit-product-price">
  <br>
  <button onclick="updateProduct()">Guardar Cambios</button>
</div>

<!-- Script para llenar la tabla con productos almacenados -->
<script>
  $(document).ready(function(){
    for (let i = 0; i < localStorage.length; i++) {
      let productId = localStorage.key(i);
      let product = JSON.parse(localStorage.getItem(productId));

      let productHTML = `
        <tr id="product-row-${productId}">
          <td class="product-id">${productId}</td>
          <td class="product-name">${product.name}</td>
          <td class="product-desc">${product.description}</td>
          <td class="product-price">$${product.price}</td>
          <td>
            <button onclick="editProduct(${productId})">Editar</button>
            <button onclick="deleteProduct(${productId})">Eliminar</button>
          </td>
        </tr>
      `;

      $("#product-list").append(productHTML);
    }
  });
</script>

</body>
</html>
